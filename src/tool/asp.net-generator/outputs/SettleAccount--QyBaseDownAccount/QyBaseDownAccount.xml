<?xml version="1.0" encoding="utf-8" ?>
<config>
  <table name="QY_BASE_DOWN_ACCOUNT">
    <fields>
       <field pname="AccountId" name="ACCOUNT_ID" label="账户编号"/>
       <field pname="AccountName" name="ACCOUNT_NAME" label="账号名称"/>
       <field pname="QueryBalance" name="QUERY_BALANCE" label="查询余额"/>
       <field pname="InnerBalance" name="INNER_BALANCE" label="理论余额"/>
       <field pname="CreditMoney" name="CREDIT_MONEY" label="授信金额"/>
       <field pname="CreatedUser" name="CREATED_USER" label="创建人"/>
       <field pname="CreatedTime" name="CREATED_TIME" label="创建时间"/>
       <field pname="LastEditUser" name="LAST_EDIT_USER" label="最后更新人"/>
       <field pname="LastEditTime" name="LAST_EDIT_TIME" label="最后更新时间"/>
    </fields>
  </table>
  <template>
    <item name="getList">
      <sql>
        <![CDATA[
          SELECT 
                t.*,
                t.*      
          FROM 
            (SELECT RID
                  FROM (SELECT R.RID, ROWNUM LINENUM
                          FROM (SELECT t.rowid RID
                                 FROM  QY_BASE_DOWN_ACCOUNT t
                                 WHERE 
                                      1=1
                                      {&@t.CreatedTime < to_date($ET,'YYYY-MM-DD')}
                                      {&@t.CreatedTime >= to_date($ST,'YYYY-MM-DD')}
                                 ORDER BY t.CREATED_TIME DESC
                                   ) R
                           WHERE ROWNUM <= { :PS} * { :PI})
                  WHERE LINENUM > { :PS} * ({ :PI} - 1)) tab
           INNER JOIN QY_BASE_DOWN_ACCOUNT t on tab.rid = t.rowid
           LEFT JOIN ACCOUNT t1 ON t.ACCOUNT_ID = t1.Id
 
        ]]>
      </sql>
    </item>
    <item name="getCount">
      <sql>
        <![CDATA[
            SELECT 
                  COUNT(1) 
            FROM QY_BASE_DOWN_ACCOUNT  t  
            WHERE 
                 1=1
                 {&@t.CreatedTime < to_date($ET,'YYYY-MM-DD')}
                 {&@t.CreatedTime >= to_date($ST,'YYYY-MM-DD')}                                      
        ]]>
      </sql>
    </item>
<item name="exportExcel">
        <sql>
          <![CDATA[
            SELECT 
                  t.*,
                  t1.CHANNEL_NAME DownChannelNoName,
                  t2.ACCOUNT_NAME DownAccountIdName,
                  t3.NAME ChangeTypeName      
            FROM  QY_BASE_DOWN_ACCOUNT t
            WHERE 
                                        1=1
                                      {&@t.CreatedTime < to_date($ET,'YYYY-MM-DD')}
                                      {&@t.CreatedTime >= to_date($ST,'YYYY-MM-DD')}
             LEFT JOIN ACCOUNT t1 ON t.ACCOUNT_ID = t1.Id
             ORDER BY t.CREATED_TIME DESC
          ]]>
        </sql>
      </item>
  </template>
</config>