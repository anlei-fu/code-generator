<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.contract.mapper.UserCompanyInfoMapper">
    <insert id="addUserCompanyInfo" parameterType="com.contract.pojo.req.AddUserCompanyInfoReq">
          insert  into user_company_info t
          <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="authFile != null">
                  t.auth_file,
            </if>
            <if test="authIdNo != null">
                  t.auth_id_no,
            </if>
            <if test="authorizer != null">
                  t.authorizer,
            </if>
            <if test="companyName != null">
                  t.company_name,
            </if>
            <if test="contactAddress != null">
                  t.contact_address,
            </if>
            <if test="contactPhone != null">
                  t.contact_phone,
            </if>
            <if test="idCardNo != null">
                  t.id_card_no,
            </if>
            <if test="idCardPicBack != null">
                  t.id_card_pic_back,
            </if>
            <if test="idCardPicFront != null">
                  t.id_card_pic_front,
            </if>
            <if test="legalPerson != null">
                  t.legal_person,
            </if>
            <if test="licenseNo != null">
                  t.license_no,
            </if>
            <if test="licensePicFront != null">
                  t.license_pic_front,
            </if>
            <if test="userId != null">
                  t.user_id,
            </if>
            <if test="verifyEndTime != null">
                  t.verify_end_time,
            </if>
            <if test="verifyStartTime != null">
                  t.verify_start_time,
            </if>
            <if test="verifyState != null">
                  t.verify_state,
            </if>
             t.create_time
          </trim>
          values
          <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="authFile != null">
                  #{authFile},
            </if>
            <if test="authIdNo != null">
                  #{authIdNo},
            </if>
            <if test="authorizer != null">
                  #{authorizer},
            </if>
            <if test="companyName != null">
                  #{companyName},
            </if>
            <if test="contactAddress != null">
                  #{contactAddress},
            </if>
            <if test="contactPhone != null">
                  #{contactPhone},
            </if>
            <if test="idCardNo != null">
                  #{idCardNo},
            </if>
            <if test="idCardPicBack != null">
                  #{idCardPicBack},
            </if>
            <if test="idCardPicFront != null">
                  #{idCardPicFront},
            </if>
            <if test="legalPerson != null">
                  #{legalPerson},
            </if>
            <if test="licenseNo != null">
                  #{licenseNo},
            </if>
            <if test="licensePicFront != null">
                  #{licensePicFront},
            </if>
            <if test="userId != null">
                  #{userId},
            </if>
            <if test="verifyEndTime != null">
                  #{verifyEndTime},
            </if>
            <if test="verifyStartTime != null">
                  #{verifyStartTime},
            </if>
            <if test="verifyState != null">
                  #{verifyState},
            </if>
             current_timestamp
          </trim>
    </insert>
    <delete id="deleteUserCompanyInfoById">
          delete from user_company_info t
          <where>
            <if test="id != null">
                  t.id = #{id}
            </if>
          </where>
    </delete>
    <update id="updateUserCompanyInfoById" parameterType="com.contract.pojo.param.UpdateUserCompanyInfoByIdParams">
        update user_company_info t
        <set>
            <if test="authFile != null">
                  t.auth_file = #{AuthFile},
            </if>
            <if test="authIdNo != null">
                  t.auth_id_no = #{AuthIdNo},
            </if>
            <if test="authorizer != null">
                  t.authorizer = #{Authorizer},
            </if>
            <if test="companyName != null">
                  t.company_name = #{CompanyName},
            </if>
            <if test="contactAddress != null">
                  t.contact_address = #{ContactAddress},
            </if>
            <if test="contactPhone != null">
                  t.contact_phone = #{ContactPhone},
            </if>
            <if test="idCardNo != null">
                  t.id_card_no = #{IdCardNo},
            </if>
            <if test="idCardPicBack != null">
                  t.id_card_pic_back = #{IdCardPicBack},
            </if>
            <if test="idCardPicFront != null">
                  t.id_card_pic_front = #{IdCardPicFront},
            </if>
            <if test="legalPerson != null">
                  t.legal_person = #{LegalPerson},
            </if>
            <if test="licenseNo != null">
                  t.license_no = #{LicenseNo},
            </if>
            <if test="licensePicFront != null">
                  t.license_pic_front = #{LicensePicFront},
            </if>
            <if test="userId != null">
                  t.user_id = #{UserId},
            </if>
            <if test="verifyEndTime != null">
                  t.verify_end_time = #{VerifyEndTime},
            </if>
            <if test="verifyStartTime != null">
                  t.verify_start_time = #{VerifyStartTime},
            </if>
            <if test="verifyState != null">
                  t.verify_state = #{VerifyState}
            </if>
        </set>
          <where>
            <if test="id != null">
                  t.id = #{id}
            </if>
          </where>
    </update>
    <select id="getUserCompanyInfoById" resultType="com.contract.pojo.entity.UserCompanyInfo">
          select
             t.auth_file,
             t.auth_id_no,
             t.authorizer,
             t.company_name,
             t.contact_address,
             t.contact_phone,
             t.create_time,
             t.id,
             t.id_card_no,
             t.id_card_pic_back,
             t.id_card_pic_front,
             t.legal_person,
             t.license_no,
             t.license_pic_front,
             t.user_id,
             t.verify_end_time,
             t.verify_start_time,
             t.verify_state
          form user_company_info t
          <where>
            <if test="id != null">
                  t.id = #{id}
            </if>
          </where>
    </select>
    <select id="getUserCompanyInfoList" resultType="com.contract.pojo.entity.UserCompanyInfo" parameterType="com.contract.pojo.req.GetUserCompanyInfoListReq">
          select
             t.auth_file,
             t.auth_id_no,
             t.authorizer,
             t.company_name,
             t.contact_address,
             t.contact_phone,
             t.create_time,
             t.id,
             t.id_card_no,
             t.id_card_pic_back,
             t.id_card_pic_front,
             t.legal_person,
             t.license_no,
             t.license_pic_front,
             t.user_id,
             t.verify_end_time,
             t.verify_start_time,
             t.verify_state
          form user_company_info t
          <where>
            <if test="authIdNo != null and authIdNo != ''">
                  t.auth_id_no = #{authIdNo}
            </if>
            <if test="authorizer != null and authorizer != ''">
                  and t.authorizer = #{authorizer}
            </if>
            <if test="contactAddress != null and contactAddress != ''">
                  and t.contact_address = #{contactAddress}
            </if>
            <if test="contactPhone != null and contactPhone != ''">
                  and t.contact_phone = #{contactPhone}
            </if>
            <if test="createTimeStart !=null and  createTimeEnd != null">
                  and t.create_time between #{createTimeStart} and #{createTimeEnd}
            </if>
            <if test="idCardNo != null and idCardNo != ''">
                  and t.id_card_no = #{idCardNo}
            </if>
            <if test="legalPerson != null and legalPerson != ''">
                  and t.legal_person = #{legalPerson}
            </if>
            <if test="licenseNo != null and licenseNo != ''">
                  and t.license_no = #{licenseNo}
            </if>
            <if test="userId != null">
                  and t.user_id = #{userId}
            </if>
            <if test="verifyEndTimeStart !=null and  verifyEndTimeEnd != null">
                  and t.verify_end_time between #{verifyEndTimeStart} and #{verifyEndTimeEnd}
            </if>
            <if test="verifyStartTimeStart !=null and  verifyStartTimeEnd != null">
                  and t.verify_start_time between #{verifyStartTimeStart} and #{verifyStartTimeEnd}
            </if>
            <if test="verifyState != null">
                  and t.verify_state = #{verifyState}
            </if>
          </where>
    </select>
</mapper>
